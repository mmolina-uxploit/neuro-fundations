# Value vs Reference Semantics

### Comparativa Técnica

| Atributo | Struct (Valor) | Class (Referencia) |
| :--- | :--- | :--- |
| **Copia** | Copia profunda (dato completo) | Copia superficial (puntero) |
| **Memoria** | Stack (Eficiencia de acceso) | Heap (Gestión vía ARC) |
| **Identidad** | Basada en contenido (Value) | Basada en instancia (Identity) |
| **Mutabilidad** | Definida por el contenedor | Independiente del contenedor |



### Observaciones de Diseño

* **Aislamiento de Estado:** Las structs previenen efectos secundarios (side-effects) al garantizar que cada contexto posea una copia independiente. Esto simplifica el testing y asegura la seguridad en entornos concurrentes (thread-safety).
* **Criterio de Identidad:** La elección depende de si el objeto se define por "qué es" (valor) o por "quién es" (instancia única).
* **Rendimiento:** El uso de structs reduce la sobrecarga del conteo de referencias (ARC) y mejora la localidad de datos en el stack.

### Decisión Arquitectónica

1.  **Default:** Utilizar `struct` para modelos de dominio, DTOs y estados de vista.
2.  **Excepción:** Utilizar `class` estrictamente cuando se requiera:
    * Identidad compartida persistente (ej. nodos de un grafo, gestores de sesión).
    * Uso de lógica en el ciclo de vida (`deinit`).
    * Herencia de clases o compatibilidad con APIs de referencia.

---